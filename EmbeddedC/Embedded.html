<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Embedded C - Advanced Computer Engineering</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><li class="spacer"></li><li class="chapter-item affix "><li class="spacer"></li><li class="chapter-item "><a href="../Introduction/Introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item affix "><li class="spacer"></li><li class="chapter-item affix "><li class="spacer"></li><li class="chapter-item affix "><li class="part-title">Debian Rock C4</li><li class="chapter-item "><a href="../Debian_Rock/Debian_Rock.html"><strong aria-hidden="true">2.</strong> Debian Rock C4</a></li><li class="chapter-item "><a href="../tmux/tmux.html"><strong aria-hidden="true">3.</strong> Terminal Multiplexing</a></li><li class="chapter-item "><a href="../vim/vim.html"><strong aria-hidden="true">4.</strong> vim</a></li><li class="chapter-item "><div><strong aria-hidden="true">5.</strong> Fork Bomb</div></li><li class="chapter-item "><div><strong aria-hidden="true">6.</strong> Multi-Threading 1</div></li><li class="chapter-item "><div><strong aria-hidden="true">7.</strong> Multi-Threading 2</div></li><li class="chapter-item "><div><strong aria-hidden="true">8.</strong> System Calls</div></li><li class="chapter-item "><div><strong aria-hidden="true">9.</strong> Daemons</div></li><li class="chapter-item "><div><strong aria-hidden="true">10.</strong> UUID</div></li><li class="chapter-item affix "><li class="spacer"></li><li class="chapter-item affix "><li class="spacer"></li><li class="chapter-item affix "><li class="part-title">BeagleBoard</li><li class="chapter-item "><a href="../ChipExploration/ChipExploration.html"><strong aria-hidden="true">11.</strong> Exploring the Chips</a></li><li class="chapter-item "><a href="../PinExploration/PinExploration.html"><strong aria-hidden="true">12.</strong> PinExploration</a></li><li class="chapter-item "><a href="../GPIOLibrary/GPIOLibrary.html"><strong aria-hidden="true">13.</strong> GPIO C Library</a></li><li class="chapter-item "><a href="../ADCLibrary/ADCLibrary.html"><strong aria-hidden="true">14.</strong> ADC C Library</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../ADCLibrary/ADCContinous.html"><strong aria-hidden="true">14.1.</strong> ADC Continous </a></li></ol></li><li class="chapter-item "><a href="../PWMLibrary/PWMLibrary.html"><strong aria-hidden="true">15.</strong> PWM C Library</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../PWMLibrary/ADCtoPWM.html"><strong aria-hidden="true">15.1.</strong> ADC to PWM Library</a></li></ol></li><li class="chapter-item "><a href="../Libioctrl/Libioctrl.html"><strong aria-hidden="true">16.</strong> libioctrl</a></li><li class="chapter-item "><div><strong aria-hidden="true">17.</strong> USB Ethernet</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><div><strong aria-hidden="true">17.1.</strong> USB to Ethernet sniffing tool</div></li></ol></li><li class="chapter-item "><div><strong aria-hidden="true">18.</strong> Mounting an SD</div></li><li class="chapter-item affix "><li class="spacer"></li><li class="chapter-item affix "><li class="spacer"></li><li class="chapter-item affix "><li class="part-title">C</li><li class="chapter-item "><a href="../Learning_C/Learning_C.html"><strong aria-hidden="true">19.</strong> Learning C</a></li><li class="chapter-item expanded "><a href="../EmbeddedC/Embedded.html" class="active"><strong aria-hidden="true">20.</strong> Embedded C</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../EmbeddedC/atmega328p.html"><strong aria-hidden="true">20.1.</strong> atmega328p</a></li><li class="chapter-item "><a href="../EmbeddedC/avg_gcc.html"><strong aria-hidden="true">20.2.</strong> avr-gcc</a></li><li class="chapter-item "><a href="../EmbeddedC/blink.html"><strong aria-hidden="true">20.3.</strong> Blink</a></li><li class="chapter-item "><div><strong aria-hidden="true">20.4.</strong> UART</div></li><li class="chapter-item "><div><strong aria-hidden="true">20.5.</strong> ADC</div></li></ol></li><li class="chapter-item "><li class="spacer"></li><li class="chapter-item affix "><li class="spacer"></li><li class="chapter-item affix "><li class="part-title">Rust</li><li class="chapter-item "><div><strong aria-hidden="true">21.</strong> Intro to Rust</div></li><li class="chapter-item affix "><li class="spacer"></li><li class="chapter-item affix "><li class="spacer"></li><li class="chapter-item affix "><li class="part-title">Bourne Again SHell</li><li class="chapter-item "><a href="../Redirection/Redirection.html"><strong aria-hidden="true">22.</strong> Redirection</a></li><li class="chapter-item "><a href="../Bash/Bash_Scripting.html"><strong aria-hidden="true">23.</strong> Bash</a></li><li class="chapter-item "><a href="../ManPages/ManPages.html"><strong aria-hidden="true">24.</strong> Man Pages</a></li><li class="chapter-item "><a href="../SystemsStats/SystemsStats.html"><strong aria-hidden="true">25.</strong> Systems Stats Script</a></li><li class="chapter-item "><a href="../RFC_Logger/rfclogger.html"><strong aria-hidden="true">26.</strong> RFC Logger</a></li><li class="chapter-item affix "><li class="spacer"></li><li class="chapter-item affix "><li class="spacer"></li><li class="chapter-item affix "><li class="part-title">Git</li><li class="chapter-item "><a href="../myFirstRepository/myFirstRepository.html"><strong aria-hidden="true">27.</strong> My First Repository</a></li><li class="chapter-item "><a href="../BranchingModel/BranchingModel.html"><strong aria-hidden="true">28.</strong> Branching-Strategy</a></li><li class="chapter-item "><a href="../OneFlow/OneFlow.html"><strong aria-hidden="true">29.</strong> Git Oneflow</a></li><li class="chapter-item "><a href="../AntiPatterns/AntiPatterns.html"><strong aria-hidden="true">30.</strong> Anti Patterns</a></li><li class="chapter-item "><a href="../ContinousDeployment/ContinousDeployment.html"><strong aria-hidden="true">31.</strong> Continous Deployment</a></li><li class="chapter-item "><a href="../ReleaseDeployment/ReleaseDeployment.html"><strong aria-hidden="true">32.</strong> Release Deployment</a></li><li class="chapter-item "><a href="../Migration/Migration.html"><strong aria-hidden="true">33.</strong> Migration</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Advanced Computer Engineering</h1>

                    <div class="right-buttons">

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction-to-embedded-c-programming"><a class="header" href="#introduction-to-embedded-c-programming">Introduction to Embedded C Programming</a></h1>
<p>Embedded C is a specialized extension of the C programming language designed specifically for programming embedded systems. Unlike general-purpose applications, embedded systems require code that is highly efficient, hardware-specific, and often real-time capable. This guide will introduce you to the essentials of Embedded C programming, focusing on using <strong>avr-gcc</strong> to compile code for AVR microcontrollers, such as the ATmega328P.</p>
<hr />
<h2 id="embedded-languages-include"><a class="header" href="#embedded-languages-include">Embedded languages include:</a></h2>
<ul>
<li>ASM
<ul>
<li>offers direct control over hardware, but it’s specific to each processor’s instruction set</li>
</ul>
</li>
<li>C
<ul>
<li>is by far the most widely used language in embedded systems due to its close-to-hardware operations and minimal runtime overhead</li>
</ul>
</li>
<li>C++
<ul>
<li>brings object-oriented programming (OOP) to embedded systems while retaining compatibility with C</li>
</ul>
</li>
<li>Python (Micro and Circuit)
<ul>
<li>have been developed to run Python on microcontrollers</li>
</ul>
</li>
<li>Rust
<ul>
<li>gaining popularity for embedded programming due to its safety features and zero-cost abstractions</li>
</ul>
</li>
<li>Ada and SPARK
<ul>
<li>Ada is known for its reliability and is often used in safety-critical systems, while SPARK is a secure subset of Ada</li>
</ul>
</li>
<li>Java (Embedded JVMs)
<ul>
<li>embedded JVMs allow Java to run on some resource-constrained systems</li>
</ul>
</li>
</ul>
<h2 id="why-use-embedded-c"><a class="header" href="#why-use-embedded-c">Why Use Embedded C?</a></h2>
<p>Embedded C provides the familiarity and flexibility of the C language while allowing low-level hardware manipulation. Key reasons for using Embedded C include:</p>
<ul>
<li><strong>Direct Hardware Access</strong>: Embedded C enables direct interaction with hardware registers.</li>
<li><strong>Portability</strong>: Code written in Embedded C can often be ported to different microcontrollers with minimal changes.</li>
<li><strong>Efficiency</strong>: Compiled C code can run close to the hardware, providing fast, deterministic behavior.</li>
<li><strong>Standardization</strong>: Embedded C adheres to ISO C standards, ensuring code compatibility and industry acceptance.</li>
</ul>
<hr />
<h2 id="atmega328p"><a class="header" href="#atmega328p">ATMEGA328P</a></h2>
<p>The ATmega328P is an 8-bit microcontroller based on the AVR Architecture. While Atmel originally developed this microcontroller, it is now part of the Microchip Technology. This IC is very famous for being the main microcontroller in several Arduino Boards such as the Arduino UNO, Arduino Nan</p>
<p>It has 131 instructions, most of which execute in a single clock cycle. So, with its 16MHz clock frequency, you can expect a throughput of nearly 16 MIPS from ATmega328P (as it has 1 MIPS/MHz throughput)</p>
<h3 id="atmega328p-pinout-and-ic-packages"><a class="header" href="#atmega328p-pinout-and-ic-packages">ATmega328P Pinout and IC Packages</a></h3>
<p>The ATmega328P is available in 4 IC Packages. The pinout and pin configuration slightly vary between the packages:</p>
<ul>
<li>32-Lead TQFP (Thin Quad Flat Pack with Leads)</li>
<li>28-Pin SPDIP (Shrink Plastic Dual In-Line Package)</li>
<li>32-Pad VQFN (Very Thin Quad Flat No-Leads)</li>
<li>28-Pad VQFN (also known as MLF – Micro Lead Frame)</li>
</ul>
<div align=center>
<p><img src="./figures/atmega328pICPackages.png" alt="" /></p>
<p><strong>Fig. 1</strong> Atmel ATMEGA328p Intergrated Circuit Packages</p>
</div>
<div align=center>
<p><img src="./figures/atmega328p.png" alt="" /></p>
<p><strong>Fig. 2</strong> Atmel ATMEGA328p</p>
</div>
<div align=center>
<p><strong>Table 1:</strong> Port and Pin Mapping</p>
<div class="table-wrapper"><table><thead><tr><th>PORT</th><th>PORT Pin</th><th>Arduino PIN</th><th>ATMEGA Pin</th></tr></thead><tbody>
<tr><td>PORTB</td><td>PB0</td><td>8</td><td>14</td></tr>
<tr><td>PORTB</td><td>PB1</td><td>9</td><td>15</td></tr>
<tr><td>PORTB</td><td>PB2</td><td>10</td><td>16</td></tr>
<tr><td>PORTB</td><td>PB3</td><td>11</td><td>17</td></tr>
<tr><td>PORTB</td><td>PB4</td><td>12</td><td>18</td></tr>
<tr><td>PORTB</td><td>PB5</td><td>13</td><td>19</td></tr>
<tr><td>PORTB</td><td>PB6</td><td>20</td><td>9</td></tr>
<tr><td>PORTB</td><td>PB7</td><td>21</td><td>10</td></tr>
<tr><td></td><td></td><td></td><td></td></tr>
<tr><td>PORTC</td><td>PC0</td><td>14/A0</td><td>23</td></tr>
<tr><td>PORTC</td><td>PC1</td><td>15/A1</td><td>24</td></tr>
<tr><td>PORTC</td><td>PC2</td><td>16/A2</td><td>25</td></tr>
<tr><td>PORTC</td><td>PC3</td><td>17/A3</td><td>26</td></tr>
<tr><td>PORTC</td><td>PC4</td><td>18/A4</td><td>27</td></tr>
<tr><td>PORTC</td><td>PC5</td><td>19/A5</td><td>28</td></tr>
<tr><td>PORTC</td><td>PC6</td><td>22/RESET</td><td>1</td></tr>
<tr><td></td><td></td><td></td><td></td></tr>
<tr><td>PORTD</td><td>PD0</td><td>0/RXD</td><td>2</td></tr>
<tr><td>PORTD</td><td>PD1</td><td>1/TXD</td><td>3</td></tr>
<tr><td>PORTD</td><td>PD2</td><td>2</td><td>4</td></tr>
<tr><td>PORTD</td><td>PD3</td><td>3</td><td>5</td></tr>
<tr><td>PORTD</td><td>PD4</td><td>4</td><td>6</td></tr>
<tr><td>PORTD</td><td>PD5</td><td>5</td><td>11</td></tr>
<tr><td>PORTD</td><td>PD6</td><td>6</td><td>12</td></tr>
<tr><td>PORTD</td><td>PD7</td><td>7</td><td>13</td></tr>
</tbody></table>
</div></div>
<hr />
<h2 id="what-are-registers"><a class="header" href="#what-are-registers">What are Registers?</a></h2>
<p>A <strong>register</strong> is a small, high-speed storage location within a microcontroller, typically 8 or 16 bits wide. Each register has a specific function, such as controlling a port, configuring the microcontroller’s peripherals, or managing data. Registers are memory-mapped, meaning each register has a unique address that can be accessed directly through code.</p>
<h3 id="why-use-registers"><a class="header" href="#why-use-registers">Why Use Registers?</a></h3>
<ol>
<li><strong>Direct Hardware Control</strong>: Registers provide a direct way to control and interact with the microcontroller's hardware.</li>
<li><strong>High Speed</strong>: Accessing and modifying registers is faster than higher-level abstractions, which is essential in real-time applications.</li>
<li><strong>Precise Configuration</strong>: Registers enable fine-tuned control over peripherals and hardware settings, allowing for efficient power and performance management.</li>
</ol>
<h3 id="example-data-direction-register-ddr"><a class="header" href="#example-data-direction-register-ddr">Example: Data Direction Register (DDR)</a></h3>
<p>For example, each GPIO port (like <code>PORTB</code>, <code>PORTC</code>) has an associated Data Direction Register (<code>DDR</code>), which controls whether each pin is an <strong>input</strong> or <strong>output</strong>. Setting a bit in the <code>DDR</code> makes the corresponding pin an output, while clearing a bit makes it an input.</p>
<pre><code class="language-c">// Example for ATmega328P microcontroller
DDRB |= (1 &lt;&lt; PB5);  // Set PB5 as an output (LED pin
</code></pre>
<p>Here, <code>DDRB</code> is the data direction register for <code>PORTB</code>. By setting the bit corresponding to <code>PB5</code> (Bit 5), we configure it as an output.</p>
<h2 id="what-are-ports"><a class="header" href="#what-are-ports">What are Ports?</a></h2>
<p>A port in microcontroller terms refers to a group of pins on the microcontroller that are used for input and output. For the ATmega328P, ports are identified as <code>PORTB</code>, <code>PORTC</code>, and <code>PORTD</code>. Each port has multiple pins (bits) that can be configured independently as inputs or outputs, allowing for communication with external devices (e.g., LEDs, buttons, sensors).</p>
<ul>
<li>
<p><strong>PORT Register</strong>: Controls the output value of each pin. Setting a bit high (1) sets the pin high (voltage applied), and clearing it (0) sets it low (grounded).</p>
</li>
<li>
<p><strong>PIN Register</strong>: Reads the input state of each pin. If the pin is high, reading from this register will return 1; if low, it will return 0.</p>
</li>
</ul>
<h3 id="example-configuring-and-controlling-a-port-pin"><a class="header" href="#example-configuring-and-controlling-a-port-pin">Example: Configuring and Controlling a Port Pin</a></h3>
<pre><code class="language-c">DDRB |= (1 &lt;&lt; PB5);  // Set PB5 as an output (LED connected to Pin 13 on Arduino)
PORTB |= (1 &lt;&lt; PB5); // Set PB5 high (turn on LED)
PORTB &amp;= ~(1 &lt;&lt; PB5); // Set PB5 low (turn off LED)
</code></pre>
<p>In this example:</p>
<ul>
<li><code>DDRB</code> configures <code>PB5</code> as an output.</li>
<li><code>PORTB</code> sets <code>PB5</code> to high, turning on the LED.</li>
<li><code>PORTB</code> clears <code>PB5</code>, turning off the LED</li>
</ul>
<h2 id="key-registers-and-their-roles"><a class="header" href="#key-registers-and-their-roles">Key registers and their Roles</a></h2>
<p>Let’s take a closer look at some commonly used registers for controlling GPIO, timers, and communication interfaces:</p>
<ul>
<li>
<p><strong>Data Direction Register (DDR)</strong></p>
<ul>
<li>
<p><strong>Purpose</strong>: Configures each pin as an input or output.</p>
</li>
<li>
<p><strong>Example</strong>: <code>DDRB</code>, <code>DDRB |= 0B100000; // PORTB5</code> controls the data direction for PORTB.</p>
<p><img src="./figures/DDDs.png" alt="" /></p>
</li>
</ul>
</li>
<li>
<p><strong>PORT Register</strong></p>
<ul>
<li>
<p><strong>Purpose</strong>: Sets the output value of each pin (either high or low).</p>
</li>
<li>
<p><strong>Example</strong>: <code>PORTB |= (1 &lt;&lt; PB5);</code> or <code>PORTB |= 0B100000; // PORTB5</code> sets pin PB5 to high.</p>
<p><img src="./figures/PORTs.png" alt="" /></p>
</li>
</ul>
</li>
<li>
<p><strong>PIN Register</strong></p>
<ul>
<li>
<p><strong>Purpose</strong>: Reads the current state of an input pin.</p>
</li>
<li>
<p><strong>Example</strong>: <code>if (PINB &amp; (1 &lt;&lt; PB0)) {...}</code> checks if PB0 is high.</p>
<p><img src="./figures/PIND.png" alt="" /></p>
</li>
</ul>
</li>
<li>
<p><strong>Peripheral Control Registers</strong></p>
<ul>
<li>Each peripheral (<strong>UART</strong>, <strong>SPI</strong>, <strong>ADC</strong>, etc.) has its own set of control registers to configure and manage its operation. For example, <code>UCSR0B</code> in ATmega328P controls <strong>UART</strong> transmission and reception.</li>
</ul>
</li>
</ul>
<h3 id="example-code"><a class="header" href="#example-code">Example code:</a></h3>
<pre><code class="language-c">#include &lt;avr/io.h&gt;
#include &lt;util/delay.h&gt;

#define F_CPU 16000000
#define BLINK_DELAY_MS 2000

int main (void)
{
  // Arduino digital pin 13 (pin 5 of PORTB) for output
  DDRB |= 0B100000; // PORTB5
  
  while(1) {
    // turn LED on
    PORTB |= 0B100000; // PORTB5
    _delay_ms(BLINK_DELAY_MS);
    
    // turn LED off
    PORTB &amp;= ~ 0B100000; // PORTB5
    _delay_ms(BLINK_DELAY_MS);
  }
}
</code></pre>
<h3 id="why-direct-register-manipulation-is-important-in-embedded-systems"><a class="header" href="#why-direct-register-manipulation-is-important-in-embedded-systems">Why Direct Register Manipulation is Important in Embedded Systems</a></h3>
<ul>
<li>
<p><strong>Efficient Resource Usage</strong>: Microcontrollers typically have limited resources. Accessing registers directly minimizes overhead and ensures efficient use of processing power and memory.</p>
</li>
<li>
<p><strong>Precise Timing Control</strong>: Certain applications (e.g., PWM, interrupts) require precise control over timing. Directly setting registers allows you to meet these timing requirements more accurately than using higher-level abstractions.</p>
</li>
<li>
<p><strong>Reduced Abstraction Layer</strong>: While high-level abstractions (such as those provided in libraries like Arduino) make programming easier, they add layers that slow down processing. Direct register access is essential when maximum efficiency is required, especially in real-time applications.</p>
<pre><code class="language-C">#include &lt;avr/io.h&gt;
#include &lt;util/delay.h&gt;

#define LED_PIN PB5  // Pin connected to the LED

int main() {
    // Set the LED pin as output
    DDRB |= (1 &lt;&lt; LED_PIN);  // DDRB controls data direction for PORTB

    while (1) {
        // Toggle the LED
        PORTB ^= (1 &lt;&lt; LED_PIN);  // XOR operation to toggle LED
        _delay_ms(500);           // Delay of 500 milliseconds
    }
    return 0;
}
</code></pre>
<p><strong>Explanation:</strong></p>
<ul>
<li><code>DDRB |= (1 &lt;&lt; LED_PIN);</code>: Configures <code>PB5</code> (<code>PORTB</code> Pin 5) as an output pin.</li>
<li><code>PORTB ^= (1 &lt;&lt; LED_PIN);</code>: Toggles the state of the pin, effectively blinking the <code>LED</code>.</li>
<li><code>_delay_ms(500);</code>: Adds a 500-millisecond delay between toggles, making the <code>LED</code> blink on and off at a 1-second interval.</li>
</ul>
</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../Learning_C/Learning_C.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../EmbeddedC/atmega328p.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../Learning_C/Learning_C.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../EmbeddedC/atmega328p.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
